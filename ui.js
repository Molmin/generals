"use strict";(()=>{var Ho=Object.create;var Bt=Object.defineProperty;var Wo=Object.getOwnPropertyDescriptor;var zo=Object.getOwnPropertyNames;var Go=Object.getPrototypeOf,Vo=Object.prototype.hasOwnProperty;var d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ko=(t,e)=>{for(var r in e)Bt(t,r,{get:e[r],enumerable:!0})},Yo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zo(e))!Vo.call(t,i)&&i!==r&&Bt(t,i,{get:()=>e[i],enumerable:!(n=Wo(e,i))||n.enumerable});return t};var Pe=(t,e,r)=>(r=t!=null?Ho(Go(t)):{},Yo(e||!t||!t.__esModule?Bt(r,"default",{value:t,enumerable:!0}):r,t));var Lr=d((Uc,Lt)=>{typeof Lt<"u"&&(Lt.exports=N);function N(t){if(t)return Xo(t)}function Xo(t){for(var e in N.prototype)t[e]=N.prototype[e];return t}N.prototype.on=N.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};N.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};N.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};N.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};N.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var zr=d((Mc,Wr)=>{Wr.exports=$e;$e.default=$e;$e.stable=Mr;$e.stableStringify=Mr;var tt="[...]",Fr="[Circular]",re=[],te=[];function Ur(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function $e(t,e,r,n){typeof n>"u"&&(n=Ur()),Ft(t,"",0,[],void 0,0,n);var i;try{te.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,Hr(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;re.length!==0;){var o=re.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function he(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),re.push([n,r,e,i])):te.push([e,r,t]):(n[r]=t,re.push([n,r,e]))}function Ft(t,e,r,n,i,o,s){o+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){he(Fr,t,e,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){he(tt,t,e,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){he(tt,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Ft(t[a],a,a,n,t,o,s);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];Ft(t[l],l,a,n,t,o,s)}}n.pop()}}function Jo(t,e){return t<e?-1:t>e?1:0}function Mr(t,e,r,n){typeof n>"u"&&(n=Ur());var i=Ut(t,"",0,[],void 0,0,n)||t,o;try{te.length===0?o=JSON.stringify(i,e,r):o=JSON.stringify(i,Hr(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;re.length!==0;){var s=re.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function Ut(t,e,r,n,i,o,s){o+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){he(Fr,t,e,i);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){he(tt,t,e,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){he(tt,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Ut(t[a],a,a,n,t,o,s);else{var c={},l=Object.keys(t).sort(Jo);for(a=0;a<l.length;a++){var u=l[a];Ut(t[u],u,a,n,t,o,s),c[u]=t[u]}if(typeof i<"u")re.push([i,e,t]),i[e]=c;else return c}n.pop()}}function Hr(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(te.length>0)for(var n=0;n<te.length;n++){var i=te[n];if(i[1]===e&&i[0]===r){r=i[2],te.splice(n,1);break}}return t.call(this,e,r)}}});var Vr=d((Hc,Gr)=>{"use strict";Gr.exports=Error});var Yr=d((Wc,Kr)=>{"use strict";Kr.exports=EvalError});var Jr=d((zc,Xr)=>{"use strict";Xr.exports=RangeError});var Qr=d((Gc,jr)=>{"use strict";jr.exports=ReferenceError});var Mt=d((Vc,Zr)=>{"use strict";Zr.exports=SyntaxError});var de=d((Kc,en)=>{"use strict";en.exports=TypeError});var rn=d((Yc,tn)=>{"use strict";tn.exports=URIError});var on=d((Xc,nn)=>{"use strict";nn.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var cn=d((Jc,an)=>{"use strict";var sn=typeof Symbol<"u"&&Symbol,jo=on();an.exports=function(){return typeof sn!="function"||typeof Symbol!="function"||typeof sn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:jo()}});var un=d((jc,ln)=>{"use strict";var Ht={__proto__:null,foo:{}},Qo=Object;ln.exports=function(){return{__proto__:Ht}.foo===Ht.foo&&!(Ht instanceof Qo)}});var hn=d((Qc,pn)=>{"use strict";var Zo="Function.prototype.bind called on incompatible ",es=Object.prototype.toString,ts=Math.max,rs="[object Function]",fn=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},ns=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},is=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};pn.exports=function(e){var r=this;if(typeof r!="function"||es.apply(r)!==rs)throw new TypeError(Zo+r);for(var n=ns(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,fn(n,arguments));return Object(u)===u?u:this}return r.apply(e,fn(n,arguments))},s=ts(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+is(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var rt=d((Zc,dn)=>{"use strict";var os=hn();dn.exports=Function.prototype.bind||os});var mn=d((el,yn)=>{"use strict";var ss=Function.prototype.call,as=Object.prototype.hasOwnProperty,cs=rt();yn.exports=cs.call(ss,as)});var oe=d((tl,Sn)=>{"use strict";var y,ls=Vr(),us=Yr(),fs=Jr(),ps=Qr(),we=Mt(),ge=de(),hs=rn(),vn=Function,Wt=function(t){try{return vn('"use strict"; return ('+t+").constructor;")()}catch{}},ne=Object.getOwnPropertyDescriptor;if(ne)try{ne({},"")}catch{ne=null}var zt=function(){throw new ge},ds=ne?function(){try{return arguments.callee,zt}catch{try{return ne(arguments,"callee").get}catch{return zt}}}():zt,ye=cn()(),ys=un()(),T=Object.getPrototypeOf||(ys?function(t){return t.__proto__}:null),me={},ms=typeof Uint8Array>"u"||!T?y:T(Uint8Array),ie={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?y:ArrayBuffer,"%ArrayIteratorPrototype%":ye&&T?T([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?y:Atomics,"%BigInt%":typeof BigInt>"u"?y:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?y:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?y:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ls,"%eval%":eval,"%EvalError%":us,"%Float32Array%":typeof Float32Array>"u"?y:Float32Array,"%Float64Array%":typeof Float64Array>"u"?y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?y:FinalizationRegistry,"%Function%":vn,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?y:Int8Array,"%Int16Array%":typeof Int16Array>"u"?y:Int16Array,"%Int32Array%":typeof Int32Array>"u"?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ye&&T?T(T([][Symbol.iterator]())):y,"%JSON%":typeof JSON=="object"?JSON:y,"%Map%":typeof Map>"u"?y:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ye||!T?y:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?y:Promise,"%Proxy%":typeof Proxy>"u"?y:Proxy,"%RangeError%":fs,"%ReferenceError%":ps,"%Reflect%":typeof Reflect>"u"?y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?y:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ye||!T?y:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ye&&T?T(""[Symbol.iterator]()):y,"%Symbol%":ye?Symbol:y,"%SyntaxError%":we,"%ThrowTypeError%":ds,"%TypedArray%":ms,"%TypeError%":ge,"%Uint8Array%":typeof Uint8Array>"u"?y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?y:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?y:Uint32Array,"%URIError%":hs,"%WeakMap%":typeof WeakMap>"u"?y:WeakMap,"%WeakRef%":typeof WeakRef>"u"?y:WeakRef,"%WeakSet%":typeof WeakSet>"u"?y:WeakSet};if(T)try{null.error}catch(t){gn=T(T(t)),ie["%Error.prototype%"]=gn}var gn,gs=function t(e){var r;if(e==="%AsyncFunction%")r=Wt("async function () {}");else if(e==="%GeneratorFunction%")r=Wt("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Wt("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&T&&(r=T(i.prototype))}return ie[e]=r,r},wn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ie=rt(),nt=mn(),ws=Ie.call(Function.call,Array.prototype.concat),bs=Ie.call(Function.apply,Array.prototype.splice),bn=Ie.call(Function.call,String.prototype.replace),it=Ie.call(Function.call,String.prototype.slice),vs=Ie.call(Function.call,RegExp.prototype.exec),Ss=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Es=/\\(\\)?/g,_s=function(e){var r=it(e,0,1),n=it(e,-1);if(r==="%"&&n!=="%")throw new we("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new we("invalid intrinsic syntax, expected opening `%`");var i=[];return bn(e,Ss,function(o,s,a,c){i[i.length]=a?bn(c,Es,"$1"):s||o}),i},As=function(e,r){var n=e,i;if(nt(wn,n)&&(i=wn[n],n="%"+i[0]+"%"),nt(ie,n)){var o=ie[n];if(o===me&&(o=gs(n)),typeof o>"u"&&!r)throw new ge("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new we("intrinsic "+e+" does not exist!")};Sn.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ge("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ge('"allowMissing" argument must be a boolean');if(vs(/^%?[^%]*%?$/,e)===null)throw new we("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_s(e),i=n.length>0?n[0]:"",o=As("%"+i+"%",r),s=o.name,a=o.value,c=!1,l=o.alias;l&&(i=l[0],bs(n,ws([0,1],l)));for(var u=1,p=!0;u<n.length;u+=1){var f=n[u],h=it(f,0,1),v=it(f,-1);if((h==='"'||h==="'"||h==="`"||v==='"'||v==="'"||v==="`")&&h!==v)throw new we("property names with quotes must have matching quotes");if((f==="constructor"||!p)&&(c=!0),i+="."+f,s="%"+i+"%",nt(ie,s))a=ie[s];else if(a!=null){if(!(f in a)){if(!r)throw new ge("base intrinsic for "+e+" exists, but the property is not available.");return}if(ne&&u+1>=n.length){var S=ne(a,f);p=!!S,p&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else p=nt(a,f),a=a[f];p&&!c&&(ie[s]=a)}}return a}});var st=d((rl,En)=>{"use strict";var xs=oe(),ot=xs("%Object.defineProperty%",!0)||!1;if(ot)try{ot({},"a",{value:1})}catch{ot=!1}En.exports=ot});var Gt=d((nl,_n)=>{"use strict";var Ts=oe(),at=Ts("%Object.getOwnPropertyDescriptor%",!0);if(at)try{at([],"length")}catch{at=null}_n.exports=at});var On=d((il,Tn)=>{"use strict";var An=st(),Os=Mt(),be=de(),xn=Gt();Tn.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new be("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new be("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new be("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new be("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new be("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new be("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!xn&&xn(e,r);if(An)An(e,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)e[r]=n;else throw new Os("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Cn=d((ol,Rn)=>{"use strict";var Vt=st(),kn=function(){return!!Vt};kn.hasArrayLengthDefineBug=function(){if(!Vt)return null;try{return Vt([],"length",{value:1}).length!==1}catch{return!0}};Rn.exports=kn});var Dn=d((sl,Nn)=>{"use strict";var ks=oe(),Pn=On(),Rs=Cn()(),$n=Gt(),In=de(),Cs=ks("%Math.floor%");Nn.exports=function(e,r){if(typeof e!="function")throw new In("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Cs(r)!==r)throw new In("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&$n){var s=$n(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(Rs?Pn(e,"length",r,!0,!0):Pn(e,"length",r)),e}});var Mn=d((al,ct)=>{"use strict";var Kt=rt(),lt=oe(),Ps=Dn(),$s=de(),Ln=lt("%Function.prototype.apply%"),Fn=lt("%Function.prototype.call%"),Un=lt("%Reflect.apply%",!0)||Kt.call(Fn,Ln),qn=st(),Is=lt("%Math.max%");ct.exports=function(e){if(typeof e!="function")throw new $s("a function is required");var r=Un(Kt,Fn,arguments);return Ps(r,1+Is(0,e.length-(arguments.length-1)),!0)};var Bn=function(){return Un(Kt,Ln,arguments)};qn?qn(ct.exports,"apply",{value:Bn}):ct.exports.apply=Bn});var Gn=d((cl,zn)=>{"use strict";var Hn=oe(),Wn=Mn(),Ns=Wn(Hn("String.prototype.indexOf"));zn.exports=function(e,r){var n=Hn(e,!!r);return typeof n=="function"&&Ns(e,".prototype.")>-1?Wn(n):n}});var Vn=d(()=>{});var pi=d((fl,fi)=>{var nr=typeof Map=="function"&&Map.prototype,Yt=Object.getOwnPropertyDescriptor&&nr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ft=nr&&Yt&&typeof Yt.get=="function"?Yt.get:null,Kn=nr&&Map.prototype.forEach,ir=typeof Set=="function"&&Set.prototype,Xt=Object.getOwnPropertyDescriptor&&ir?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,pt=ir&&Xt&&typeof Xt.get=="function"?Xt.get:null,Yn=ir&&Set.prototype.forEach,Ds=typeof WeakMap=="function"&&WeakMap.prototype,De=Ds?WeakMap.prototype.has:null,qs=typeof WeakSet=="function"&&WeakSet.prototype,qe=qs?WeakSet.prototype.has:null,Bs=typeof WeakRef=="function"&&WeakRef.prototype,Xn=Bs?WeakRef.prototype.deref:null,Ls=Boolean.prototype.valueOf,Fs=Object.prototype.toString,Us=Function.prototype.toString,Ms=String.prototype.match,or=String.prototype.slice,J=String.prototype.replace,Hs=String.prototype.toUpperCase,Jn=String.prototype.toLowerCase,oi=RegExp.prototype.test,jn=Array.prototype.concat,L=Array.prototype.join,Ws=Array.prototype.slice,Qn=Math.floor,Qt=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Jt=Object.getOwnPropertySymbols,Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ve=typeof Symbol=="function"&&typeof Symbol.iterator=="object",k=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ve||!0)?Symbol.toStringTag:null,si=Object.prototype.propertyIsEnumerable,Zn=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function ei(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||oi.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Qn(-t):Qn(t);if(n!==t){var i=String(n),o=or.call(e,i.length+1);return J.call(i,r,"$&_")+"."+J.call(J.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return J.call(e,r,"$&_")}var er=Vn(),ti=er.custom,ri=ci(ti)?ti:null;fi.exports=function t(e,r,n,i){var o=r||{};if(X(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(X(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=X(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(X(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(X(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return ui(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?ei(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return a?ei(e,l):l}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return tr(e)?"[Array]":"[Object]";var p=aa(o,n);if(typeof i>"u")i=[];else if(li(i,e)>=0)return"[Circular]";function f(q,K,Y){if(K&&(i=Ws.call(i),i.push(K)),Y){var Ce={depth:o.depth};return X(o,"quoteStyle")&&(Ce.quoteStyle=o.quoteStyle),t(q,Ce,n+1,i)}return t(q,o,n+1,i)}if(typeof e=="function"&&!ni(e)){var h=Qs(e),v=ut(e,f);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(v.length>0?" { "+L.call(v,", ")+" }":"")}if(ci(e)){var S=ve?J.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Zt.call(e);return typeof e=="object"&&!ve?Ne(S):S}if(ia(e)){for(var P="<"+Jn.call(String(e.nodeName)),I=e.attributes||[],z=0;z<I.length;z++)P+=" "+I[z].name+"="+ai(zs(I[z].value),"double",o);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+Jn.call(String(e.nodeName))+">",P}if(tr(e)){if(e.length===0)return"[]";var g=ut(e,f);return p&&!sa(g)?"["+rr(g,p)+"]":"[ "+L.call(g,", ")+" ]"}if(Vs(e)){var G=ut(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!si.call(e,"cause")?"{ ["+String(e)+"] "+L.call(jn.call("[cause]: "+f(e.cause),G),", ")+" }":G.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+L.call(G,", ")+" }"}if(typeof e=="object"&&s){if(ri&&typeof e[ri]=="function"&&er)return er(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Zs(e)){var Z=[];return Kn&&Kn.call(e,function(q,K){Z.push(f(K,e,!0)+" => "+f(q,e))}),ii("Map",ft.call(e),Z,p)}if(ra(e)){var Re=[];return Yn&&Yn.call(e,function(q){Re.push(f(q,e))}),ii("Set",pt.call(e),Re,p)}if(ea(e))return jt("WeakMap");if(na(e))return jt("WeakSet");if(ta(e))return jt("WeakRef");if(Ys(e))return Ne(f(Number(e)));if(Js(e))return Ne(f(Qt.call(e)));if(Xs(e))return Ne(Ls.call(e));if(Ks(e))return Ne(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===global)return"{ [object globalThis] }";if(!Gs(e)&&!ni(e)){var fe=ut(e,f),Ze=Zn?Zn(e)===Object.prototype:e instanceof Object||e.constructor===Object,ee=e instanceof Object?"":"null prototype",V=!Ze&&k&&Object(e)===e&&k in e?or.call(j(e),8,-1):ee?"Object":"",et=Ze||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",pe=et+(V||ee?"["+L.call(jn.call([],V||[],ee||[]),": ")+"] ":"");return fe.length===0?pe+"{}":p?pe+"{"+rr(fe,p)+"}":pe+"{ "+L.call(fe,", ")+" }"}return String(e)};function ai(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function zs(t){return J.call(String(t),/"/g,"&quot;")}function tr(t){return j(t)==="[object Array]"&&(!k||!(typeof t=="object"&&k in t))}function Gs(t){return j(t)==="[object Date]"&&(!k||!(typeof t=="object"&&k in t))}function ni(t){return j(t)==="[object RegExp]"&&(!k||!(typeof t=="object"&&k in t))}function Vs(t){return j(t)==="[object Error]"&&(!k||!(typeof t=="object"&&k in t))}function Ks(t){return j(t)==="[object String]"&&(!k||!(typeof t=="object"&&k in t))}function Ys(t){return j(t)==="[object Number]"&&(!k||!(typeof t=="object"&&k in t))}function Xs(t){return j(t)==="[object Boolean]"&&(!k||!(typeof t=="object"&&k in t))}function ci(t){if(ve)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Zt)return!1;try{return Zt.call(t),!0}catch{}return!1}function Js(t){if(!t||typeof t!="object"||!Qt)return!1;try{return Qt.call(t),!0}catch{}return!1}var js=Object.prototype.hasOwnProperty||function(t){return t in this};function X(t,e){return js.call(t,e)}function j(t){return Fs.call(t)}function Qs(t){if(t.name)return t.name;var e=Ms.call(Us.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function li(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Zs(t){if(!ft||!t||typeof t!="object")return!1;try{ft.call(t);try{pt.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function ea(t){if(!De||!t||typeof t!="object")return!1;try{De.call(t,De);try{qe.call(t,qe)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ta(t){if(!Xn||!t||typeof t!="object")return!1;try{return Xn.call(t),!0}catch{}return!1}function ra(t){if(!pt||!t||typeof t!="object")return!1;try{pt.call(t);try{ft.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function na(t){if(!qe||!t||typeof t!="object")return!1;try{qe.call(t,qe);try{De.call(t,De)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function ia(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function ui(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return ui(or.call(t,0,e.maxStringLength),e)+n}var i=J.call(J.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,oa);return ai(i,"single",e)}function oa(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Hs.call(e.toString(16))}function Ne(t){return"Object("+t+")"}function jt(t){return t+" { ? }"}function ii(t,e,r,n){var i=n?rr(r,n):L.call(r,", ");return t+" ("+e+") {"+i+"}"}function sa(t){for(var e=0;e<t.length;e++)if(li(t[e],`
`)>=0)return!1;return!0}function aa(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=L.call(Array(t.indent+1)," ");else return null;return{base:r,prev:L.call(Array(e+1),r)}}function rr(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+L.call(t,","+r)+`
`+e.prev}function ut(t,e){var r=tr(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=X(t,i)?e(t[i],t):""}var o=typeof Jt=="function"?Jt(t):[],s;if(ve){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var c in t)X(t,c)&&(r&&String(Number(c))===c&&c<t.length||ve&&s["$"+c]instanceof Symbol||(oi.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof Jt=="function")for(var l=0;l<o.length;l++)si.call(t,o[l])&&n.push("["+e(o[l])+"]: "+e(t[o[l]],t));return n}});var yi=d((pl,di)=>{"use strict";var hi=oe(),Se=Gn(),ca=pi(),la=de(),ht=hi("%WeakMap%",!0),dt=hi("%Map%",!0),ua=Se("WeakMap.prototype.get",!0),fa=Se("WeakMap.prototype.set",!0),pa=Se("WeakMap.prototype.has",!0),ha=Se("Map.prototype.get",!0),da=Se("Map.prototype.set",!0),ya=Se("Map.prototype.has",!0),sr=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},ma=function(t,e){var r=sr(t,e);return r&&r.value},ga=function(t,e,r){var n=sr(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},wa=function(t,e){return!!sr(t,e)};di.exports=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new la("Side channel does not contain "+ca(o))},get:function(o){if(ht&&o&&(typeof o=="object"||typeof o=="function")){if(e)return ua(e,o)}else if(dt){if(r)return ha(r,o)}else if(n)return ma(n,o)},has:function(o){if(ht&&o&&(typeof o=="object"||typeof o=="function")){if(e)return pa(e,o)}else if(dt){if(r)return ya(r,o)}else if(n)return wa(n,o);return!1},set:function(o,s){ht&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new ht),fa(e,o,s)):dt?(r||(r=new dt),da(r,o,s)):(n||(n={key:{},next:null}),ga(n,o,s))}};return i}});var yt=d((hl,mi)=>{"use strict";var ba=String.prototype.replace,va=/%20/g,ar={RFC1738:"RFC1738",RFC3986:"RFC3986"};mi.exports={default:ar.RFC3986,formatters:{RFC1738:function(t){return ba.call(t,va,"+")},RFC3986:function(t){return String(t)}},RFC1738:ar.RFC1738,RFC3986:ar.RFC3986}});var ur=d((dl,wi)=>{"use strict";var Sa=yt(),cr=Object.prototype.hasOwnProperty,se=Array.isArray,F=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ea=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(se(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},gi=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},_a=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(se(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!cr.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return se(e)&&!se(r)&&(i=gi(e,n)),se(e)&&se(r)?(r.forEach(function(o,s){if(cr.call(e,s)){var a=e[s];a&&typeof a=="object"&&o&&typeof o=="object"?e[s]=t(a,o,n):e.push(o)}else e[s]=o}),e):Object.keys(r).reduce(function(o,s){var a=r[s];return cr.call(o,s)?o[s]=t(o[s],a,n):o[s]=a,o},i)},Aa=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},xa=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},lr=1024,Ta=function(e,r,n,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;c+=lr){for(var l=s.length>=lr?s.slice(c,c+lr):s,u=[],p=0;p<l.length;++p){var f=l.charCodeAt(p);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===Sa.RFC1738&&(f===40||f===41)){u[u.length]=l.charAt(p);continue}if(f<128){u[u.length]=F[f];continue}if(f<2048){u[u.length]=F[192|f>>6]+F[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=F[224|f>>12]+F[128|f>>6&63]+F[128|f&63];continue}p+=1,f=65536+((f&1023)<<10|l.charCodeAt(p)&1023),u[u.length]=F[240|f>>18]+F[128|f>>12&63]+F[128|f>>6&63]+F[128|f&63]}a+=u.join("")}return a},Oa=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],u=s[l];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:s,prop:l}),n.push(u))}return Ea(r),e},ka=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Ra=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Ca=function(e,r){return[].concat(e,r)},Pa=function(e,r){if(se(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)};wi.exports={arrayToObject:gi,assign:Aa,combine:Ca,compact:Oa,decode:xa,encode:Ta,isBuffer:Ra,isRegExp:ka,maybeMap:Pa,merge:_a}});var Ai=d((yl,_i)=>{"use strict";var vi=yi(),mt=ur(),Be=yt(),$a=Object.prototype.hasOwnProperty,Si={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},U=Array.isArray,Ia=Array.prototype.push,Ei=function(t,e){Ia.apply(t,U(e)?e:[e])},Na=Date.prototype.toISOString,bi=Be.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:mt.encode,encodeValuesOnly:!1,format:bi,formatter:Be.formatters[bi],indices:!1,serializeDate:function(e){return Na.call(e)},skipNulls:!1,strictNullHandling:!1},Da=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},fr={},qa=function t(e,r,n,i,o,s,a,c,l,u,p,f,h,v,S,P,I,z){for(var g=e,G=z,Z=0,Re=!1;(G=G.get(fr))!==void 0&&!Re;){var fe=G.get(e);if(Z+=1,typeof fe<"u"){if(fe===Z)throw new RangeError("Cyclic object value");Re=!0}typeof G.get(fr)>"u"&&(Z=0)}if(typeof u=="function"?g=u(r,g):g instanceof Date?g=h(g):n==="comma"&&U(g)&&(g=mt.maybeMap(g,function(qt){return qt instanceof Date?h(qt):qt})),g===null){if(s)return l&&!P?l(r,x.encoder,I,"key",v):r;g=""}if(Da(g)||mt.isBuffer(g)){if(l){var Ze=P?r:l(r,x.encoder,I,"key",v);return[S(Ze)+"="+S(l(g,x.encoder,I,"value",v))]}return[S(r)+"="+S(String(g))]}var ee=[];if(typeof g>"u")return ee;var V;if(n==="comma"&&U(g))P&&l&&(g=mt.maybeMap(g,l)),V=[{value:g.length>0?g.join(",")||null:void 0}];else if(U(u))V=u;else{var et=Object.keys(g);V=p?et.sort(p):et}var pe=c?r.replace(/\./g,"%2E"):r,q=i&&U(g)&&g.length===1?pe+"[]":pe;if(o&&U(g)&&g.length===0)return q+"[]";for(var K=0;K<V.length;++K){var Y=V[K],Ce=typeof Y=="object"&&typeof Y.value<"u"?Y.value:g[Y];if(!(a&&Ce===null)){var Dt=f&&c?Y.replace(/\./g,"%2E"):Y,Mo=U(g)?typeof n=="function"?n(q,Dt):q:q+(f?"."+Dt:"["+Dt+"]");z.set(e,Z);var Br=vi();Br.set(fr,z),Ei(ee,t(Ce,Mo,n,i,o,s,a,c,n==="comma"&&P&&U(g)?null:l,u,p,f,h,v,S,P,I,Br))}}return ee},Ba=function(e){if(!e)return x;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||x.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Be.default;if(typeof e.format<"u"){if(!$a.call(Be.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Be.formatters[n],o=x.filter;(typeof e.filter=="function"||U(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in Si?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=x.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:x.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:x.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:s,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:x.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?x.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:x.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:x.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:x.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:x.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:x.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:x.strictNullHandling}};_i.exports=function(t,e){var r=t,n=Ba(e),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):U(n.filter)&&(o=n.filter,i=o);var s=[];if(typeof r!="object"||r===null)return"";var a=Si[n.arrayFormat],c=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=vi(),u=0;u<i.length;++u){var p=i[u];n.skipNulls&&r[p]===null||Ei(s,qa(r[p],p,a,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var f=s.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}});var Oi=d((ml,Ti)=>{"use strict";var Ee=ur(),pr=Object.prototype.hasOwnProperty,La=Array.isArray,A={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Ee.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Fa=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},xi=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ua="utf8=%26%2310003%3B",Ma="utf8=%E2%9C%93",Ha=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=r.parameterLimit===1/0?void 0:r.parameterLimit,s=i.split(r.delimiter,o),a=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===Ma?l="utf-8":s[c]===Ua&&(l="iso-8859-1"),a=c,c=s.length);for(c=0;c<s.length;++c)if(c!==a){var u=s[c],p=u.indexOf("]="),f=p===-1?u.indexOf("="):p+1,h,v;f===-1?(h=r.decoder(u,A.decoder,l,"key"),v=r.strictNullHandling?null:""):(h=r.decoder(u.slice(0,f),A.decoder,l,"key"),v=Ee.maybeMap(xi(u.slice(f+1),r),function(P){return r.decoder(P,A.decoder,l,"value")})),v&&r.interpretNumericEntities&&l==="iso-8859-1"&&(v=Fa(v)),u.indexOf("[]=")>-1&&(v=La(v)?[v]:v);var S=pr.call(n,h);S&&r.duplicates==="combine"?n[h]=Ee.combine(n[h],v):(!S||r.duplicates==="last")&&(n[h]=v)}return n},Wa=function(t,e,r,n){for(var i=n?e:xi(e,r),o=t.length-1;o>=0;--o){var s,a=t[o];if(a==="[]"&&r.parseArrays)s=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{s=r.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);!r.parseArrays&&l===""?s={0:i}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(s=[],s[u]=i):l!=="__proto__"&&(s[l]=i)}i=s}return i},za=function(e,r,n,i){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=n.depth>0&&s.exec(o),l=c?o.slice(0,c.index):o,u=[];if(l){if(!n.plainObjects&&pr.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var p=0;n.depth>0&&(c=a.exec(o))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&pr.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+o.slice(c.index)+"]"),Wa(u,r,n,i)}},Ga=function(e){if(!e)return A;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?A.charset:e.charset,n=typeof e.duplicates>"u"?A.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:A.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:A.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:A.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:A.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:A.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:A.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:A.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:A.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:A.decoder,delimiter:typeof e.delimiter=="string"||Ee.isRegExp(e.delimiter)?e.delimiter:A.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:A.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:A.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:A.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:A.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:A.strictNullHandling}};Ti.exports=function(t,e){var r=Ga(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Ha(t,r):t,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var a=o[s],c=za(a,n[a],r,typeof t=="string");i=Ee.merge(i,c,r)}return r.allowSparse===!0?i:Ee.compact(i)}});var Ri=d((gl,ki)=>{"use strict";var Va=Ai(),Ka=Oi(),Ya=yt();ki.exports={formats:Ya,parse:Ka,stringify:Va}});var Ci=d(()=>{});var gt=d(M=>{"use strict";function $i(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xa(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Xa(t,e){if(t){if(typeof t=="string")return Pi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(t,e)}}function Pi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}M.type=t=>t.split(/ *; */).shift();M.params=t=>{let e={};var r=$i(t.split(/ *; */)),n;try{for(r.s();!(n=r.n()).done;){let o=n.value.split(/ *= */),s=o.shift(),a=o.shift();s&&a&&(e[s]=a)}}catch(i){r.e(i)}finally{r.f()}return e};M.parseLinks=t=>{let e={};var r=$i(t.split(/ *, */)),n;try{for(r.s();!(n=r.n()).done;){let o=n.value.split(/ *; */),s=o[0].slice(1,-1),a=o[1].split(/ *= */)[1].slice(1,-1);e[a]=s}}catch(i){r.e(i)}finally{r.f()}return e};M.cleanHeader=(t,e)=>(delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t);M.isObject=t=>t!==null&&typeof t=="object";M.hasOwn=Object.hasOwn||function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(t),e)};M.mixin=(t,e)=>{for(let r in e)M.hasOwn(e,r)&&(t[r]=e[r])}});var qi=d((Sl,Di)=>{"use strict";var Ii=Ci(),Ni=gt(),wt=Ni.isObject,Le=Ni.hasOwn;Di.exports=w;function w(){}w.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this};w.prototype.parse=function(t){return this._parser=t,this};w.prototype.responseType=function(t){return this._responseType=t,this};w.prototype.serialize=function(t){return this._serializer=t,this};w.prototype.timeout=function(t){if(!t||typeof t!="object")return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(let e in t)if(Le(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this};w.prototype.retry=function(t,e){return(arguments.length===0||t===!0)&&(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var Ja=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),ja=new Set([408,413,429,500,502,503,504,521,522,524]);w.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{let r=this._retryCallback(t,e);if(r===!0)return!0;if(r===!1)return!1}catch(r){console.error(r)}return!!(e&&e.status&&ja.has(e.status)||t&&(t.code&&Ja.has(t.code)||t.timeout&&t.code==="ECONNABORTED"||t.crossDomain))};w.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()};w.prototype.then=function(t,e){if(!this._fullfilledPromise){let r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((n,i)=>{r.on("abort",()=>{if(this._maxRetries&&this._maxRetries>this._retries)return;if(this.timedout&&this.timedoutError){i(this.timedoutError);return}let o=new Error("Aborted");o.code="ABORTED",o.status=this.status,o.method=this.method,o.url=this.url,i(o)}),r.end((o,s)=>{o?i(o):n(s)})})}return this._fullfilledPromise.then(t,e)};w.prototype.catch=function(t){return this.then(void 0,t)};w.prototype.use=function(t){return t(this),this};w.prototype.ok=function(t){if(typeof t!="function")throw new Error("Callback required");return this._okCallback=t,this};w.prototype._isResponseOK=function(t){return t?this._okCallback?this._okCallback(t):t.status>=200&&t.status<300:!1};w.prototype.get=function(t){return this._header[t.toLowerCase()]};w.prototype.getHeader=w.prototype.get;w.prototype.set=function(t,e){if(wt(t)){for(let r in t)Le(t,r)&&this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this};w.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this};w.prototype.field=function(t,e,r){if(t==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(wt(t)){for(let n in t)Le(t,n)&&this.field(n,t[n]);return this}if(Array.isArray(e)){for(let n in e)Le(e,n)&&this.field(t,e[n]);return this}if(e==null)throw new Error(".field(name, val) val can not be empty");return typeof e=="boolean"&&(e=String(e)),r?this._getFormData().append(t,e,r):this._getFormData().append(t,e),this};w.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(Ii.gte(process.version,"v13.0.0")&&Ii.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");this.req.abort()}return this.clearTimeout(),this.emit("abort"),this};w.prototype._auth=function(t,e,r,n){switch(r.type){case"basic":this.set("Authorization",`Basic ${n(`${t}:${e}`)}`);break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization",`Bearer ${t}`);break;default:break}return this};w.prototype.withCredentials=function(t){return t===void 0&&(t=!0),this._withCredentials=t,this};w.prototype.redirects=function(t){return this._maxRedirects=t,this};w.prototype.maxResponseSize=function(t){if(typeof t!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=t,this};w.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};w.prototype.send=function(t){let e=wt(t),r=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&wt(this._data))for(let n in t){if(typeof t[n]=="bigint"&&!t[n].toJSON)throw new Error("Cannot serialize BigInt value to json");Le(t,n)&&(this._data[n]=t[n])}else{if(typeof t=="bigint")throw new Error("Cannot send value of type BigInt");typeof t=="string"?(r||this.type("form"),r=this._header["content-type"],r&&(r=r.toLowerCase().trim()),r==="application/x-www-form-urlencoded"?this._data=this._data?`${this._data}&${t}`:t:this._data=(this._data||"")+t):this._data=t}return!e||this._isHost(t)?this:(r||this.type("json"),this)};w.prototype.sortQuery=function(t){return this._sort=typeof t>"u"?!0:t,this};w.prototype._finalizeQueryString=function(){let t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){let e=this.url.indexOf("?");if(e>=0){let r=this.url.slice(e+1).split("&");typeof this._sort=="function"?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,e)+"?"+r.join("&")}}};w.prototype._appendQueryString=()=>{console.warn("Unsupported")};w.prototype._timeoutError=function(t,e,r){if(this._aborted)return;let n=new Error(`${t+e}ms exceeded`);n.timeout=e,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)};w.prototype._setTimeouts=function(){let t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(()=>{t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(()=>{t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}});var Li=d((El,Bi)=>{"use strict";var hr=gt();Bi.exports=bt;function bt(){}bt.prototype.get=function(t){return this.header[t.toLowerCase()]};bt.prototype._setHeaderProperties=function(t){let e=t["content-type"]||"";this.type=hr.type(e);let r=hr.params(e);for(let n in r)Object.prototype.hasOwnProperty.call(r,n)&&(this[n]=r[n]);this.links={};try{t.link&&(this.links=hr.parseLinks(t.link))}catch{}};bt.prototype._setStatusProperties=function(t){let e=Math.trunc(t/100);this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=e===1,this.ok=e===2,this.redirect=e===3,this.clientError=e===4,this.serverError=e===5,this.error=e===4||e===5?this.toError():!1,this.created=t===201,this.accepted=t===202,this.noContent=t===204,this.badRequest=t===400,this.unauthorized=t===401,this.notAcceptable=t===406,this.forbidden=t===403,this.notFound=t===404,this.unprocessableEntity=t===422}});var Mi=d((_l,Ui)=>{"use strict";function Qa(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Za(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function Za(t,e){if(t){if(typeof t=="string")return Fi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fi(t,e)}}function Fi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yr(){this._defaults=[]}for(vt=0,dr=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];vt<dr.length;vt++){let t=dr[vt];yr.prototype[t]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this._defaults.push({fn:t,args:r}),this}}var vt,dr;yr.prototype._setDefaults=function(t){var e=Qa(this._defaults),r;try{for(e.s();!(r=e.n()).done;){let n=r.value;t[n.fn](...n.args)}}catch(n){e.e(n)}finally{e.f()}};Ui.exports=yr});var Ae=d((ae,vr)=>{"use strict";function ec(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=tc(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw a}}}}function tc(t,e){if(t){if(typeof t=="string")return Hi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hi(t,e)}}function Hi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _e;typeof window<"u"?_e=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),_e=void 0):_e=self;var rc=Lr(),nc=zr(),ic=Ri(),oc=qi(),wr=gt(),Wi=wr.isObject,zi=wr.mixin,br=wr.hasOwn,sc=Li(),Et=Mi();function ac(){}vr.exports=function(t,e){return typeof e=="function"?new ae.Request("GET",t).end(e):arguments.length===1?new ae.Request("GET",t):new ae.Request(t,e)};ae=vr.exports;var b=ae;ae.Request=_;b.getXHR=()=>{if(_e.XMLHttpRequest)return new _e.XMLHttpRequest;throw new Error("Browser-only version of superagent could not find XHR")};var cc="".trim?t=>t.trim():t=>t.replace(/(^\s*|\s*$)/g,"");function Gi(t){if(!Wi(t))return t;let e=[];for(let r in t)br(t,r)&&gr(e,r,t[r]);return e.join("&")}function gr(t,e,r){if(r!==void 0){if(r===null){t.push(encodeURI(e));return}if(Array.isArray(r)){var n=ec(r),i;try{for(n.s();!(i=n.n()).done;){let o=i.value;gr(t,e,o)}}catch(o){n.e(o)}finally{n.f()}}else if(Wi(r))for(let o in r)br(r,o)&&gr(t,`${e}[${o}]`,r[o]);else t.push(encodeURI(e)+"="+encodeURIComponent(r))}}b.serializeObject=Gi;function Vi(t){let e={},r=t.split("&"),n,i;for(let o=0,s=r.length;o<s;++o)n=r[o],i=n.indexOf("="),i===-1?e[decodeURIComponent(n)]="":e[decodeURIComponent(n.slice(0,i))]=decodeURIComponent(n.slice(i+1));return e}b.parseString=Vi;b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};b.serialize={"application/x-www-form-urlencoded":ic.stringify,"application/json":nc};b.parse={"application/x-www-form-urlencoded":Vi,"application/json":JSON.parse};function lc(t){let e=t.split(/\r?\n/),r={},n,i,o,s;for(let a=0,c=e.length;a<c;++a)i=e[a],n=i.indexOf(":"),n!==-1&&(o=i.slice(0,n).toLowerCase(),s=cc(i.slice(n+1)),r[o]=s);return r}function Ki(t){return/[/+]json($|[^-\w])/i.test(t)}function Fe(t){this.req=t,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;let e=this.xhr.status;e===1223&&(e=204),this._setStatusProperties(e),this.headers=lc(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&t._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}zi(Fe.prototype,sc.prototype);Fe.prototype._parseBody=function(t){let e=b.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&Ki(this.type)&&(e=b.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)};Fe.prototype.toError=function(){let t=this.req,e=t.method,r=t.url,n=`cannot ${e} ${r} (${this.status})`,i=new Error(n);return i.status=this.status,i.method=e,i.url=r,i};b.Response=Fe;function _(t,e){let r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",()=>{let n=null,i=null;try{i=new Fe(r)}catch(s){return n=new Error("Parser is unable to parse the response"),n.parse=!0,n.original=s,r.xhr?(n.rawResponse=typeof r.xhr.responseType>"u"?r.xhr.responseText:r.xhr.response,n.status=r.xhr.status?r.xhr.status:null,n.statusCode=n.status):(n.rawResponse=null,n.status=null),r.callback(n)}r.emit("response",i);let o;try{r._isResponseOK(i)||(o=new Error(i.statusText||i.text||"Unsuccessful HTTP response"))}catch(s){o=s}o?(o.original=n,o.response=i,o.status=o.status||i.status,r.callback(o,i)):r.callback(null,i)})}rc(_.prototype);zi(_.prototype,oc.prototype);_.prototype.type=function(t){return this.set("Content-Type",b.types[t]||t),this};_.prototype.accept=function(t){return this.set("Accept",b.types[t]||t),this};_.prototype.auth=function(t,e,r){arguments.length===1&&(e=""),typeof e=="object"&&e!==null&&(r=e,e=""),r||(r={type:typeof btoa=="function"?"basic":"auto"});let n=r.encoder?r.encoder:i=>{if(typeof btoa=="function")return btoa(i);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(t,e,r,n)};_.prototype.query=function(t){return typeof t!="string"&&(t=Gi(t)),t&&this._query.push(t),this};_.prototype.attach=function(t,e,r){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this};_.prototype._getFormData=function(){return this._formData||(this._formData=new _e.FormData),this._formData};_.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();let r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)};_.prototype.crossDomainError=function(){let t=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)};_.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this};_.prototype.ca=_.prototype.agent;_.prototype.buffer=_.prototype.ca;_.prototype.write=()=>{throw new Error("Streaming is not supported in browser version of superagent")};_.prototype.pipe=_.prototype.write;_.prototype._isHost=function(t){return t&&typeof t=="object"&&!Array.isArray(t)&&Object.prototype.toString.call(t)!=="[object Object]"};_.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||ac,this._finalizeQueryString(),this._end()};_.prototype._setUploadTimeout=function(){let t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(()=>{t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))};_.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));let t=this;this.xhr=b.getXHR();let e=this.xhr,r=this._formData||this._data;this._setTimeouts(),e.addEventListener("readystatechange",()=>{let i=e.readyState;if(i>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),i!==4)return;let o;try{o=e.status}catch{o=0}if(!o)return t.timedout||t._aborted?void 0:t.crossDomainError();t.emit("end")});let n=(i,o)=>{o.total>0&&(o.percent=o.loaded/o.total*100,o.percent===100&&clearTimeout(t._uploadTimeoutTimer)),o.direction=i,t.emit("progress",o)};if(this.hasListeners("progress"))try{e.addEventListener("progress",n.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",n.bind(null,"upload"))}catch{}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(i){return this.callback(i)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof r!="string"&&!this._isHost(r)){let i=this._header["content-type"],o=this._serializer||b.serialize[i?i.split(";")[0]:""];!o&&Ki(i)&&(o=b.serialize["application/json"]),o&&(r=o(r))}for(let i in this.header)this.header[i]!==null&&br(this.header,i)&&e.setRequestHeader(i,this.header[i]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(typeof r>"u"?null:r)};b.agent=()=>new Et;for(St=0,mr=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];St<mr.length;St++){let t=mr[St];Et.prototype[t.toLowerCase()]=function(e,r){let n=new b.Request(t,e);return this._setDefaults(n),r&&n.end(r),n}}var St,mr;Et.prototype.del=Et.prototype.delete;b.get=(t,e,r)=>{let n=b("GET",t);return typeof e=="function"&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n};b.head=(t,e,r)=>{let n=b("HEAD",t);return typeof e=="function"&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n};b.options=(t,e,r)=>{let n=b("OPTIONS",t);return typeof e=="function"&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n};function Yi(t,e,r){let n=b("DELETE",t);return typeof e=="function"&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}b.del=Yi;b.delete=Yi;b.patch=(t,e,r)=>{let n=b("PATCH",t);return typeof e=="function"&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n};b.post=(t,e,r)=>{let n=b("POST",t);return typeof e=="function"&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n};b.put=(t,e,r)=>{let n=b("PUT",t);return typeof e=="function"&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}});var Er=Pe(Ae());var Qi=Pe(Ae());function C(t){window.location.pathname=`${window.site_prefix}${t}`}var Xi="",Ji=0,Sr="",ji=!1,O=class t{static get uname(){return Xi}static get uid(){return Ji}static get token(){return Sr}static set token(e){Sr=e,window.localStorage.setItem("player-id",e)}static async init(){Sr=window.localStorage.getItem("player-id")||"";let{body:e}=await Qi.default.post("/user/current").send({token:t.token});e.loggedIn?(Xi=e.name,Ji=e.uid,ji=e.isAdmin,ji&&$("body").addClass("isadmin"),window.location.pathname==="/login"&&C("/")):(t.token="",window.location.pathname!=="/login"&&C("/login"))}};function uc(){let t=$(".page--home > .create-game > p");t.find(".submit").on("click",async()=>{let e=t.find(".player1").val()?.toString()||"",r=t.find(".player2").val()?.toString()||"",n=t.find(".startAt").val()?.toString()||"",i=t.find(".note").val()?.toString()||"",{body:o}=await Er.default.post("/game/create").send({token:O.token,player1:e,player2:r,startAt:+n*60*1e3+Date.now(),note:i});o.error?window.alert(o.error):C("/")})}async function fc(){let{body:{list:t}}=await Er.default.post("/game/list").send({token:O.token});for(let e of t)$(".page--home > .list > table > tbody").append(`
      <tr>
        <td>${e.gameId}</td>
        <td>${e.player1}</td>
        <td>${e.player2}</td>
        <td>${new Date(e.startAt).toLocaleString()}</td>
        <td>${e.done?e.winner:"\u6E38\u620F\u672A\u7ED3\u675F"}</td>
        <td>
          ${[e.player1,e.player2].includes(O.uid)&&!e.done?`<a href="/game/${e.gameId}/play">\u8FDB\u5165</a>`:""}
          ${e.done?`<a href="/game/${e.gameId}/replay">\u56DE\u653E</a>`:""}
        </td>
        <td>${e.note}</td>
      </tr>
    `)}async function Zi(){fc(),uc()}var _r=Pe(Ae());async function eo(){let t=await _r.default.post("/user/newToken").send({token:""});$(".page--login > p.token").text(t.text.trim()),$(document).on("click",".page--login button.submit",async()=>{let e=($(".page--login .paste-id").val()?.toString()||"").trim(),{body:r}=await _r.default.post("/user/login/luogu").send({pasteId:e,token:""});r.error?window.alert(r.error):(O.token=r.token,C("/"))})}var qo=Pe(Ae());var B=Object.create(null);B.open="0";B.close="1";B.ping="2";B.pong="3";B.message="4";B.upgrade="5";B.noop="6";var Ue=Object.create(null);Object.keys(B).forEach(t=>{Ue[B[t]]=t});var Me={type:"error",data:"parser error"};var no=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",io=typeof ArrayBuffer=="function",oo=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,He=({type:t,data:e},r,n)=>no&&e instanceof Blob?r?n(e):to(e,n):io&&(e instanceof ArrayBuffer||oo(e))?r?n(e):to(new Blob([e]),n):n(B[t]+(e||"")),to=(t,e)=>{let r=new FileReader;return r.onload=function(){let n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function ro(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var Ar;function so(t,e){if(no&&t.data instanceof Blob)return t.data.arrayBuffer().then(ro).then(e);if(io&&(t.data instanceof ArrayBuffer||oo(t.data)))return e(ro(t.data));He(t,!1,r=>{Ar||(Ar=new TextEncoder),e(Ar.encode(r))})}var ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",We=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ao.length;t++)We[ao.charCodeAt(t)]=t;var co=t=>{let e=t.length*.75,r=t.length,n,i=0,o,s,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);let l=new ArrayBuffer(e),u=new Uint8Array(l);for(n=0;n<r;n+=4)o=We[t.charCodeAt(n)],s=We[t.charCodeAt(n+1)],a=We[t.charCodeAt(n+2)],c=We[t.charCodeAt(n+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l};var dc=typeof ArrayBuffer=="function",ze=(t,e)=>{if(typeof t!="string")return{type:"message",data:lo(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:yc(t.substring(1),e)}:Ue[r]?t.length>1?{type:Ue[r],data:t.substring(1)}:{type:Ue[r]}:Me},yc=(t,e)=>{if(dc){let r=co(t);return lo(r,e)}else return{base64:!0,data:t}},lo=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};var uo="",fo=(t,e)=>{let r=t.length,n=new Array(r),i=0;t.forEach((o,s)=>{He(o,!1,a=>{n[s]=a,++i===r&&e(n.join(uo))})})},po=(t,e)=>{let r=t.split(uo),n=[];for(let i=0;i<r.length;i++){let o=ze(r[i],e);if(n.push(o),o.type==="error")break}return n};function ho(){return new TransformStream({transform(t,e){so(t,r=>{let n=r.length,i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);let o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{i=new Uint8Array(9);let o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}var xr;function _t(t){return t.reduce((e,r)=>e+r.length,0)}function At(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),n=0;for(let i=0;i<e;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function yo(t,e){xr||(xr=new TextDecoder);let r=[],n=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(r.push(s);;){if(n===0){if(_t(r)<1)break;let c=At(r,1);o=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(_t(r)<2)break;let c=At(r,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(_t(r)<8)break;let c=At(r,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Me);break}i=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(_t(r)<i)break;let c=At(r,i);a.enqueue(ze(o?c:xr.decode(c),e)),n=0}if(i===0||i>t){a.enqueue(Me);break}}}})}var Tr=4;function E(t){if(t)return mc(t)}function mc(t){for(var e in E.prototype)t[e]=E.prototype[e];return t}E.prototype.on=E.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};E.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};E.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};E.prototype.emitReserved=E.prototype.emit;E.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};E.prototype.hasListeners=function(t){return!!this.listeners(t).length};var R=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function xt(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}var gc=R.setTimeout,wc=R.clearTimeout;function H(t,e){e.useNativeTimers?(t.setTimeoutFn=gc.bind(R),t.clearTimeoutFn=wc.bind(R)):(t.setTimeoutFn=R.setTimeout.bind(R),t.clearTimeoutFn=R.clearTimeout.bind(R))}var bc=1.33;function mo(t){return typeof t=="string"?vc(t):Math.ceil((t.byteLength||t.size)*bc)}function vc(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function go(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function wo(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}var Tt=class extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}},W=class extends E{constructor(e){super(),this.writable=!1,H(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new Tt(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let r=ze(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let r=go(e);return r.length?"?"+r:""}};var Eo="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Or=64,Sc={},bo=0,Ot=0,vo;function So(t){let e="";do e=Eo[t%Or]+e,t=Math.floor(t/Or);while(t>0);return e}function kt(){let t=So(+new Date);return t!==vo?(bo=0,vo=t):t+"."+So(bo++)}for(;Ot<Or;Ot++)Sc[Eo[Ot]]=Ot;var _o=!1;try{_o=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Ao=_o;function kr(t){let e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ao))return new XMLHttpRequest}catch{}if(!e)try{return new R[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Ec(){}var _c=function(){return new kr({xdomain:!1}).responseType!=null}(),Rt=class extends W{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){let n=location.protocol==="https:",i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}let r=e&&e.forceBase64;this.supportsBinary=_c&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};po(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,fo(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=kt()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Q(this.uri(),e)}doWrite(e,r){let n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}},Q=class t extends E{constructor(e,r){super(),H(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e;let r=xt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;let n=this.xhr=new kr(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=t.requestsCount++,t.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Ec,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete t.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Q.requestsCount=0;Q.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xo);else if(typeof addEventListener=="function"){let t="onpagehide"in R?"pagehide":"unload";addEventListener(t,xo,!1)}}function xo(){for(let t in Q.requests)Q.requests.hasOwnProperty(t)&&Q.requests[t].abort()}var ce=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),Ge=R.WebSocket||R.MozWebSocket,Ct=!0,To="arraybuffer";var Oo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Pt=class extends W{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,n=Oo?{}:xt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Ct&&!Oo?r?new Ge(e,r):new Ge(e):new Ge(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],i=r===e.length-1;He(n,this.supportsBinary,o=>{let s={};Ct||(n.options&&(s.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1));try{Ct?this.ws.send(o):this.ws.send(o,s)}catch{}i&&ce(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=kt()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}check(){return!!Ge}};var $t=class extends W{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let r=yo(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),i=ho();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();let o=()=>{n.read().then(({done:a,value:c})=>{a||(this.onPacket(c),o())}).catch(a=>{})};o();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],i=r===e.length-1;this.writer.write(n).then(()=>{i&&ce(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}};var Rr={websocket:Pt,webtransport:$t,polling:Rt};var Ac=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xe(t){if(t.length>2e3)throw"URI too long";let e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=Ac.exec(t||""),o={},s=14;for(;s--;)o[xc[s]]=i[s]||"";return r!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Tc(o,o.path),o.queryKey=Oc(o,o.query),o}function Tc(t,e){let r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Oc(t,e){let r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,o){i&&(r[i]=o)}),r}var le=class t extends E{constructor(e,r={}){super(),this.binaryType=To,this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=xe(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=xe(r.host).host),H(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wo(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){let r=Object.assign({},this.opts.query);r.EIO=Tr,r.transport=e,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Rr[e](n)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;t.priorWebsocketSuccess=!1;let i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;t.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{let f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function o(){n||(n=!0,u(),r.close(),r=null)}let s=p=>{let f=new Error("probe error: "+p);f.transport=r.name,o(),this.emitReserved("upgradeError",f)};function a(){s("transport closed")}function c(){s("socket closed")}function l(p){r&&p.name!==r.name&&o()}let u=()=>{r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};r.once("open",i),r.once("error",s),r.once("close",a),this.once("close",c),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let i=this.writeBuffer[n].data;if(i&&(r+=mo(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:e,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],n=0,i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};le.protocol=Tr;var Lu=le.protocol;function ko(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=xe(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}var Dr={};Ko(Dr,{Decoder:()=>Ir,Encoder:()=>$r,PacketType:()=>m,protocol:()=>Io});var kc=typeof ArrayBuffer=="function",Rc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Ro=Object.prototype.toString,Cc=typeof Blob=="function"||typeof Blob<"u"&&Ro.call(Blob)==="[object BlobConstructor]",Pc=typeof File=="function"||typeof File<"u"&&Ro.call(File)==="[object FileConstructor]";function Ke(t){return kc&&(t instanceof ArrayBuffer||Rc(t))||Cc&&t instanceof Blob||Pc&&t instanceof File}function Ve(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Ve(t[r]))return!0;return!1}if(Ke(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ve(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Ve(t[r]))return!0;return!1}function Co(t){let e=[],r=t.data,n=t;return n.data=Cr(r,e),n.attachments=e.length,{packet:n,buffers:e}}function Cr(t,e){if(!t)return t;if(Ke(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Cr(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Cr(t[n],e));return r}return t}function Po(t,e){return t.data=Pr(t.data,e),delete t.attachments,t}function Pr(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Pr(t[r],e);else if(typeof t=="object")for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Pr(t[r],e));return t}var $c=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Io=5,m;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(m||(m={}));var $r=class{constructor(e){this.replacer=e}encode(e){return(e.type===m.EVENT||e.type===m.ACK)&&Ve(e)?this.encodeAsBinary({type:e.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===m.BINARY_EVENT||e.type===m.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){let r=Co(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}};function $o(t){return Object.prototype.toString.call(t)==="[object Object]"}var Ir=class t extends E{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);let n=r.type===m.BINARY_EVENT;n||r.type===m.BINARY_ACK?(r.type=n?m.EVENT:m.ACK,this.reconstructor=new Nr(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Ke(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,n={type:Number(e.charAt(0))};if(m[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===m.BINARY_EVENT||n.type===m.BINARY_ACK){let o=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let s=e.substring(o,r);if(s!=Number(s)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(s)}if(e.charAt(r+1)==="/"){let o=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(o,r)}else n.nsp="/";let i=e.charAt(r+1);if(i!==""&&Number(i)==i){let o=r+1;for(;++r;){let s=e.charAt(r);if(s==null||Number(s)!=s){--r;break}if(r===e.length)break}n.id=Number(e.substring(o,r+1))}if(e.charAt(++r)){let o=this.tryParse(e.substr(r));if(t.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case m.CONNECT:return $o(r);case m.DISCONNECT:return r===void 0;case m.CONNECT_ERROR:return typeof r=="string"||$o(r);case m.EVENT:case m.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&$c.indexOf(r[0])===-1);case m.ACK:case m.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Nr=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=Po(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function D(t,e,r){return t.on(e,r),function(){t.off(e,r)}}var Ic=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Te=class extends E{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[D(e,"open",this.onopen.bind(this)),D(e,"packet",this.onpacket.bind(this)),D(e,"error",this.onerror.bind(this)),D(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(Ic.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;let n={type:m.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){let s=this.ids++,a=r.pop();this._registerAckCallback(s,a),n.id=s}let i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){var n;let i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=r;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},i),s=(...a)=>{this.io.clearTimeoutFn(o),r.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...r){return new Promise((n,i)=>{let o=(s,a)=>s?i(s):n(a);o.withError=!0,r.push(o),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:m.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){let n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case m.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case m.EVENT:case m.BINARY_EVENT:this.onevent(e);break;case m.ACK:case m.BINARY_ACK:this.onack(e);break;case m.DISCONNECT:this.ondisconnect();break;case m.CONNECT_ERROR:this.destroy();let n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){let r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let r=this,n=!1;return function(...i){n||(n=!0,r.packet({type:m.ACK,id:e,data:i}))}}onack(e){let r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:m.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let r=this._anyOutgoingListeners.slice();for(let n of r)n.apply(this,e.data)}}};function ue(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ue.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};ue.prototype.reset=function(){this.attempts=0};ue.prototype.setMin=function(t){this.ms=t};ue.prototype.setMax=function(t){this.max=t};ue.prototype.setJitter=function(t){this.jitter=t};var Oe=class extends E{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,H(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ue({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let i=r.parser||Dr;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new le(this.uri,this.opts);let r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let i=D(r,"open",function(){n.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=D(r,"error",o);if(this._timeout!==!1){let a=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),r.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(D(e,"ping",this.onping.bind(this)),D(e,"data",this.ondata.bind(this)),D(e,"error",this.onerror.bind(this)),D(e,"close",this.onclose.bind(this)),D(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){ce(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Te(this,e,r),this.nsps[e]=n),n}_destroy(e){let r=Object.keys(this.nsps);for(let n of r)if(this.nsps[n].active)return;this._close()}_packet(e){let r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var Ye={};function Xe(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=ko(t,e.path||"/socket.io"),n=r.source,i=r.id,o=r.path,s=Ye[i]&&o in Ye[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s,c;return a?c=new Oe(n,e):(Ye[i]||(Ye[i]=new Oe(n,e)),c=Ye[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}Object.assign(Xe,{Manager:Oe,Socket:Te,io:Xe,connect:Xe});function Nc(){let t=()=>String.fromCharCode(97+Math.floor(Math.random()*26));return`${Date.now()}${t()}${t()}${t()}${t()}`}var qr=!1,ke=class{constructor(){this.isReplay=!1;this.now=[];this.$table=$(".page--game_play .game-table");this.width=0;this.height=0;this.me=0;this.steps=[];this.players=[];this.gameEnded=!1;this.nowSelectX=-1;this.nowSelectY=-1;this.nowSelectStatus=3}endGame(){this.gameEnded=!0}updatePlayers(e){this.players=e,this.me=e.filter(r=>r.uid===O.uid)[0].id}updateMap(e){let r=e.split(";").map(o=>o.split(",")),n=qr;if(!qr){this.width=r[0].length,this.height=r.length;for(let o=0;o<this.height;o++)this.now.push(new Array(this.width).fill({type:"empty",owner:0,army:0}));for(let o=0;o<this.height;o++){this.$table.append(`<tr data-x="${o}"></tr>`);for(let s=0;s<this.width;s++)this.$table.find(`tr[data-x="${o}"]`).append(`<td data-x="${o}" data-y="${s}"></td>`)}$(document).on("click",".page--game_play table",o=>this.handleClickByEvent(o)),$(document).on("keydown",o=>this.handleKeydown(o)),qr=!0}let i=[];for(let o=0;o<this.height;o++)for(let s=0;s<this.width;s++){let a=r[o][s][0],c={type:a==="g"?"general":a==="c"?"city":a==="e"?"empty":a==="m"?"mountain":a==="u"?"unknown":"obstacle",owner:+r[o][s][1],army:+r[o][s].replace(/^[a-z][0-9]/,"")};(!n||!["type","owner","army"].every(l=>this.now[o][s][l]===c[l]))&&i.push(`${o},${s}`),this.now[o][s]=c}for(let o=0;o<this.height;o++)for(let s=0;s<this.width;s++)this.updateCell(o,s),i.includes(`${o},${s}`)&&this.updateSelectStatus(o,s)}async updateCell(e,r){let n=this.now[e][r],i=this.$table.find(`td[data-x="${e}"][data-y="${r}"]`),o=(i.attr("class")||"").split(" ");if(!o.includes(`type--${n.type}`)){for(let s of o.filter(a=>a.startsWith("type--")))i.removeClass(s);i.addClass(`type--${n.type}`)}if(!o.includes(`owner--${n.owner}`)){for(let s of o.filter(a=>a.startsWith("owner--")))i.removeClass(s);i.addClass(`owner--${n.owner}`)}}async updateSelectStatus(e,r,n=!1){if(this.isReplay){let f=this.$table.find(`td[data-x="${e}"][data-y="${r}"]`),h=this.now[e][r];f.html(h.army>0||h.owner===0&&h.army===0&&h.type==="city"?h.army.toString():"");return}if(e<0||r<0||e>=this.height||r>=this.width)return;n&&await Promise.all([this.updateSelectStatus(e+1,r),this.updateSelectStatus(e-1,r),this.updateSelectStatus(e,r+1),this.updateSelectStatus(e,r-1)]);let i=this.$table.find(`td[data-x="${e}"][data-y="${r}"]`),o=this.now[e][r],a=this.nowSelectX===e&&this.nowSelectY===r&&this.nowSelectStatus===2?"50%":o.army>0||o.owner===0&&o.army===0&&o.type==="city"?o.army.toString():"";function c(f,h,v,S){return f.filter(I=>I[0][0]===e&&I[0][1]===r&&I[1][0]===e+h&&I[1][1]===r+v).length>0?S:""}i.html([c(this.steps,0,-1,'<div class="center-vertical" style="left: 0px;">\u2190</div>'),c(this.steps,0,1,'<div class="center-vertical" style="right: 0px;">\u2192</div>'),c(this.steps,-1,0,'<div class="center-horizontal" style="top: 0px;">\u2191</div>'),c(this.steps,1,0,'<div class="center-horizontal" style="bottom: 0px;">\u2193</div>'),a].join(""));let l=f=>{i.hasClass(f)&&i.removeClass(f)},u=f=>{i.hasClass(f)||i.addClass(f)},p=(f,h)=>{h?u(f):l(f)};if(this.nowSelectX===e&&this.nowSelectY===r)u("selected"),l("attackable"),u("selectable");else{let f=Math.abs(this.nowSelectX-e)+Math.abs(this.nowSelectY-r)===1;f&&=o.type!=="mountain",l("selected"),p("attackable",f),p("selectable",f||o.owner===this.me)}}handleAddStep(e,r,n,i,o){this.steps.push([[e,r],[n,i],o,Nc()]),this.updateSelectStatus(e,r),this.sendSteps()}async sendSteps(){this.socket.emit("updateSteps",this.steps)}sendSurrenderMessage(){this.socket.emit("surrender")}markStepsAsDone(e){let r=this.steps.filter(n=>e.includes(n[3]));this.steps=this.steps.filter(n=>!e.includes(n[3]));for(let n of r)this.updateSelectStatus(n[0][0],n[0][1]);this.sendSteps()}async handleClick(e,r=!0){if(this.gameEnded||this.isReplay)return;let n=this.nowSelectX,i=this.nowSelectY,o=+(e.attr("data-x")||"0"),s=+(e.attr("data-y")||"0");function a(){r||(this.nowSelectStatus=3,this.nowSelectX=this.nowSelectY=-1,this.updateSelectStatus(n,i,!0))}if(typeof e.attr("data-y")!="string")return a.bind(this)();if(e.hasClass("attackable"))this.nowSelectX=o,this.nowSelectY=s,this.handleAddStep(n,i,this.nowSelectX,this.nowSelectY,this.nowSelectStatus===2),this.nowSelectStatus=1,this.updateSelectStatus(n,i,!0),this.updateSelectStatus(o,s,!0);else if(n===o&&i===s){let c=this.nowSelectStatus===2;if(c&&!r)return a.bind(this)();this.nowSelectStatus=c?1:2,this.updateSelectStatus(n,i)}else if(e.hasClass("selectable"))console.info("select position",o,s),this.nowSelectStatus=1,this.nowSelectX=o,this.nowSelectY=s,this.updateSelectStatus(n,i,!0),this.updateSelectStatus(o,s,!0);else return a.bind(this)()}handleClickByEvent(e){this.handleClick($(e.target),!1)}handleKeydown(e){if(!(this.gameEnded||this.isReplay)&&this.nowSelectStatus!==3){if(["ArrowUp","KeyW"].includes(e.code))return this.handleClick(this.$table.find(`td[data-x="${this.nowSelectX-1}"][data-y="${this.nowSelectY}"]`));if(["ArrowDown","KeyS"].includes(e.code))return this.handleClick(this.$table.find(`td[data-x="${this.nowSelectX+1}"][data-y="${this.nowSelectY}"]`));if(["ArrowLeft","KeyA"].includes(e.code))return this.handleClick(this.$table.find(`td[data-x="${this.nowSelectX}"][data-y="${this.nowSelectY-1}"]`));if(["ArrowRight","KeyD"].includes(e.code))return this.handleClick(this.$table.find(`td[data-x="${this.nowSelectX}"][data-y="${this.nowSelectY+1}"]`));if(e.code==="KeyZ")return this.handleClick(this.$table.find(`td[data-x="${this.nowSelectX}"][data-y="${this.nowSelectY}"]`));if(e.code==="KeyQ"){let r=this.steps;this.steps=[];for(let n of r)this.updateSelectStatus(n[0][0],n[0][1]);return this.sendSteps()}if(e.code==="KeyE"){let r=this.steps.pop();return r?(this.updateSelectStatus(r[0][0],r[0][1]),r[1][0]===this.nowSelectX&&r[1][1]===this.nowSelectY&&(this.nowSelectX=r[0][0],this.nowSelectY=r[0][1],this.nowSelectStatus=1,this.updateSelectStatus(r[0][0],r[0][1],!0),this.updateSelectStatus(r[1][0],r[1][1],!0)),this.sendSteps()):void 0}if(e.code==="Escape")return this.sendSurrenderMessage()}}};var No=[],It=class{constructor(e,r,n){this.$ele=$(".alert");$("h1.alert-title").text(e),$("p.alert-description").html(r);for(let i of n)$(".alert > center").append(`<div class="button-div"><button class="${i.class}" data-key="${i.key}">${i.text}</button></div>`)}open(){return new Promise(e=>{this.$ele.removeClass("hidden"),No.push(r=>{let n=$(r.currentTarget);n.attr("data-key")&&(this.$ele.addClass("hidden"),this.$ele.find("div.button-div").remove(),e(n.attr("data-key")))})})}};function Do(){$(document).on("click",".alert button",t=>{No.forEach(e=>e(t))})}async function Dc(){let t=+window.location.pathname.split("/")[2],{body:e}=await qo.default.post("/game/info").send({token:O.token,id:t});return(e.error||![e.player1,e.player2].includes(O.uid)||e.done)&&C("/"),e}async function Bo(){let t=await Dc();console.info("game.info",t);let e=new ke,r=Xe(`${window.location.protocol.replace("http","ws")}//${window.location.host}`);e.socket=r;let n;r.emit("token",O.token),r.emit("join",t.gameId),r.on("error",u=>{window.alert(u),C("/")}),r.on("update",u=>{e.markStepsAsDone(u.doneSteps),e.updatePlayers(u.players),e.updateMap(u.map),$(".game-leaderboard > tbody").html(`
      <tr>
        <td><span style="white-space: nowrap;"><span style="color: gold;">\u2605 </span></span></td>
        <td>Player</td>
        <td>Army</td>
        <td>Land</td>
      </tr>
      ${u.players.map(p=>`
        <tr class="${p.status===3?"dead":p.status===2?"surrendered":""}">
          <td><span style="white-space: nowrap;"><span style="color: gold;">\u2605 </span>0</span></td>
          <td class="leaderboard-name owner--${p.id}">${p.name}</td>
          <td>${p.army}</td>
          <td>${p.land}</td>
        </tr>
      `).join("")}
    `),$(".page--game_play > .turn-counter").text(Date.now()>=t.startAt?`Turn ${u.turn}${u.isHalf?".":""}`:`Game will start after ${Math.ceil((t.startAt-Date.now())/1e3)} s`),t.startAt>Date.now()?n=setInterval(()=>{$(".page--game_play > .turn-counter").text(`Game will start after ${Math.ceil((t.startAt-Date.now())/1e3)} s`)},500):clearInterval(n)}),r.on("recieveMessage",u=>{}),r.on("end",async u=>{console.info("game.end",u);let p=e.players.filter(h=>h.id===u.killBy)[0]?.name;e.endGame();let f=await new It(u.won?"You won!":"Game Over",u.won?"":`You were defeated by <span class="bold">${p}</span>.`,[{text:"Play Again",class:"small inverted",key:"play-again"},{text:"Watch Replay",class:"small inverted",key:"replay"},{text:"Exit",class:"inverted",key:"exit"}]).open();C("/")}),setInterval(()=>r.emit("ping"),15e3);let i=32,o=30,s=30;function a(){$(".game-table-container").attr("style",[`top: ${s}px;`,`left: ${o}px;`].join(" ")),e.$table.attr("style",[`--cell-size: ${i}px;`,`--bg-size: ${i/32*25}px;`,`--number-size: ${i/32*3+9}px;`].join(" "))}function c(){$(document).on("wheel",u=>{let p=u.originalEvent.deltaY;p<0&&i<100&&(i+=6),p>0&&i>11&&(i-=6),a()})}function l(){let u=!1,p=0,f=0,h=0,v=0;$(document).on("mousedown",S=>{h=o,v=s,p=S.clientX,f=S.clientY,u=!0}),$(document).on("mouseup",S=>{u&&(u=!1,o=h+S.clientX-p,s=v+S.clientY-f,a())}),$(document).on("mousemove",S=>{u&&(o=h+S.clientX-p,s=v+S.clientY-f,a())})}c(),l(),a()}var Lo=Pe(Ae());var Nt=class extends ke{constructor(r){super();this.replay=r;this.isReplay=!0;this.nowTurn=1;this.isHalf=!1;this.updateMap(this.replay.initial.join(";"))}gotoTurn(r,n){let i=this.nowTurn*2+(this.isHalf?1:0)-3,o=r*2+(n?1:0)-3;if(!(o<-1||o>=this.replay.turns.length||Math.floor(o)!==o)){if(i<o)for(let a=i+1;a<=o;a++){let c=this.replay.turns[a].split(",");for(let l of c)l&&this.updateDiffMap(l)}this.nowTurn=r,this.isHalf=n}}updateDiffMap(r){let n=+r.replace(/[a-z]\d+/,""),i=Math.floor(n/this.now[0].length),o=n%this.now[0].length,s=r.replace(/\d/g,"");this.now[i][o].type=s==="g"?"general":s==="c"?"city":s==="e"?"empty":"mountain";let a=r.replace(/\d+[a-z]/,"");this.now[i][o].owner=+a[0],this.now[i][o].army=+a.slice(1),this.updateCell(i,o),this.updateSelectStatus(i,o)}};async function Bc(){let t=+window.location.pathname.split("/")[2],{body:e}=await Lo.default.post("/game/replay").send({token:O.token,id:t});return e.error&&C("/"),e.replay}async function Fo(){let t=await Bc();console.info("game.replay",t);let e=new Nt(t);setInterval(()=>{e.isHalf?e.gotoTurn(e.nowTurn+1,!1):e.gotoTurn(e.nowTurn,!0)},500);let r=32,n=30,i=30;function o(){$(".game-table-container").attr("style",[`top: ${i}px;`,`left: ${n}px;`].join(" ")),e.$table.attr("style",[`--cell-size: ${r}px;`,`--bg-size: ${r/32*25}px;`,`--number-size: ${r/32*3+9}px;`].join(" "))}function s(){$(document).on("wheel",c=>{let l=c.originalEvent.deltaY;l<0&&r<100&&(r+=6),l>0&&r>11&&(r-=6),o()})}function a(){let c=!1,l=0,u=0,p=0,f=0;$(document).on("mousedown",h=>{p=n,f=i,l=h.clientX,u=h.clientY,c=!0}),$(document).on("mouseup",h=>{c&&(c=!1,n=p+h.clientX-l,i=f+h.clientY-u,o())}),$(document).on("mousemove",h=>{c&&(n=p+h.clientX-l,i=f+h.clientY-u,o())})}s(),a(),o()}var Uo={};function je(t,e){Uo[t]={page:t,init:e},console.info(`Registered page ${t}`)}var Je="";function Qe(t){console.info(`Going to page ${t}`),Je&&$(`.page.page--${Je}`).removeClass("active"),Je=t,Uo[Je].init(),$(`.page.page--${Je}`).addClass("active")}je("home",Zi);je("login",eo);je("game_play",Bo);je("game_replay",Fo);$(async()=>{Do(),await O.init();let t=window.location.pathname.replace(window.site_prefix,"");/^\/login$/.test(t)?Qe("login"):/^\/$/.test(t)?Qe("home"):/^\/game\/[1-9][0-9]*?\/play$/.test(t)?Qe("game_play"):/^\/game\/[1-9][0-9]*?\/replay$/.test(t)?Qe("game_replay"):C("/")});})();
